<ng-container *ngIf="!edit_mode">
  <div class="mb-2" style="white-space: pre-wrap">
    {{ getDisplayString() }}
  </div>
</ng-container>

<ng-container *ngIf="edit_mode">
  <div class="mb-2">
    <ng-container *ngFor="let item of columns | keyvalue">
      {{ item.key }}
      <ng-container [ngSwitch]="item.key">
        <ng-container *ngSwitchCase="'Date'">
          <input
            type="date"
            class="form-control"
            [placeholder]="item.key"
            (keyup)="checkPendingChanges()"
            (change)="checkPendingChanges()"
            [(ngModel)]="data_edit[item.value]"
          />
        </ng-container>
        <ng-container *ngSwitchCase="'Time'">
          <input
            type="time"
            class="form-control"
            [placeholder]="item.key"
            (keyup)="checkPendingChanges()"
            (change)="checkPendingChanges()"
            [(ngModel)]="data_edit[item.value]"
          />
        </ng-container>
        <ng-container *ngSwitchCase="'Description'">
          <textarea
            rows="{{ data_edit[item.value].split('\n').length }}"
            class="form-control"
            [placeholder]="item.key"
            (keyup)="checkPendingChanges()"
            [(ngModel)]="data_edit[item.value]"
          ></textarea>
        </ng-container>
        <ng-container *ngSwitchCase="'Note'">
          <textarea
            rows="{{ data_edit[item.value].split('\n').length }}"
            class="form-control"
            [placeholder]="item.key"
            (keyup)="checkPendingChanges()"
            [(ngModel)]="data_edit[item.value]"
          ></textarea>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <input
            type="text"
            class="form-control"
            [placeholder]="item.key"
            (keyup)="checkPendingChanges()"
            [(ngModel)]="data_edit[item.value]"
          />
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
  <div class="center">
    <button class="btn btn-outline-danger btn-sm" (click)="deleteData()">
      <i class="bi bi-trash"></i>
      Delete
    </button>
    <ng-container *ngIf="pending_changes">
      &nbsp;
      <button class="btn btn-outline-primary btn-sm" (click)="saveData()">
        <i class="bi bi-save"></i>
        Save
      </button>
    </ng-container>
  </div>
  <hr />
</ng-container>
