<ng-container *ngIf="!edit_mode">
  <div class="mb-2" style="white-space: pre-wrap">
    {{ getDisplayString() }}
  </div>
</ng-container>

<ng-container *ngIf="edit_mode">
  <div class="mb-2">
    <ng-container *ngFor="let column of columns">
      {{ column.title }}
      <ng-container [ngSwitch]="column.field">
        <ng-container *ngSwitchCase="'date'">
          <input
            type="date"
            class="form-control"
            [placeholder]="column.title"
            (keyup)="checkPendingChanges()"
            (change)="checkPendingChanges()"
            [(ngModel)]="data_edit[column.field]"
          />
        </ng-container>
        <ng-container *ngSwitchCase="'time'">
          <input
            type="time"
            class="form-control"
            [placeholder]="column.title"
            (keyup)="checkPendingChanges()"
            (change)="checkPendingChanges()"
            [(ngModel)]="data_edit[column.field]"
          />
        </ng-container>
        <ng-container *ngSwitchCase="'description'">
          <textarea
            rows="{{ data_edit[column.field].split('\n').length }}"
            class="form-control"
            [placeholder]="column.title"
            (keyup)="checkPendingChanges()"
            [(ngModel)]="data_edit[column.field]"
          ></textarea>
        </ng-container>
        <ng-container *ngSwitchCase="'note'">
          <textarea
            rows="{{ data_edit[column.field].split('\n').length }}"
            class="form-control"
            [placeholder]="column.title"
            (keyup)="checkPendingChanges()"
            [(ngModel)]="data_edit[column.field]"
          ></textarea>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <input
            type="text"
            class="form-control"
            [placeholder]="column.title"
            (keyup)="checkPendingChanges()"
            [(ngModel)]="data_edit[column.field]"
          />
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
  <div class="center">
    <button class="btn btn-outline-danger btn-sm" (click)="deleteData()">
      <i class="bi bi-trash"></i>
      Delete
    </button>
    <ng-container *ngIf="pending_changes">
      &nbsp;
      <button class="btn btn-outline-primary btn-sm" (click)="saveData()">
        <i class="bi bi-save"></i>
        Save
      </button>
    </ng-container>
  </div>
  <hr />
</ng-container>
